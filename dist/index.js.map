{"version":3,"file":"index.js","sources":["../src/sticky-sidebar.js","../src/index.tsx"],"sourcesContent":["/**\n * Sticky Sidebar JavaScript Plugin.\n * @version 3.3.4\n * @author Ahmed Bouhuolia <a.bouhuolia@gmail.com>\n * @license The MIT License (MIT)\n */\n\n// ---------------------------------\n// # Define Constants\n// ---------------------------------\n//\nconst EVENT_KEY = '.stickySidebar'\n// const VERSION = '3.3.4'\n\nconst DEFAULTS = {\n  /**\n   * Additional top spacing of the element when it becomes sticky.\n   * @type {Numeric|Function}\n   */\n  topSpacing: 0,\n\n  /**\n   * Additional bottom spacing of the element when it becomes sticky.\n   * @type {Numeric|Function}\n   */\n  bottomSpacing: 0,\n\n  /**\n   * Container sidebar selector to know what the beginning and end of sticky element.\n   * @type {String|False}\n   */\n  containerSelector: false,\n\n  /**\n   * Inner wrapper selector.\n   * @type {String}\n   */\n  innerWrapperSelector: '.inner-wrapper-sticky',\n\n  /**\n   * The name of CSS class to apply to elements when they have become stuck.\n   * @type {String|False}\n   */\n  stickyClass: 'is-affixed',\n\n  /**\n   * Detect when sidebar and its container change height so re-calculate their dimensions.\n   * @type {Boolean}\n   */\n  resizeSensor: true,\n\n  /**\n   * The sidebar returns to its normal position if its width below this value.\n   * @type {Numeric}\n   */\n  minWidth: false\n}\n\n// ---------------------------------\n// # Class Definition\n// ---------------------------------\n//\n/**\n * Sticky Sidebar Class.\n * @public\n */\nclass StickySidebar {\n  /**\n   * Sticky Sidebar Constructor.\n   * @constructor\n   * @param {HTMLElement|String} sidebar - The sidebar element or sidebar selector.\n   * @param {Object} options - The options of sticky sidebar.\n   */\n  constructor(sidebar, options = {}) {\n    this.options = StickySidebar.extend(DEFAULTS, options)\n\n    // Sidebar element query if there's no one, throw error.\n    this.sidebar =\n      typeof sidebar === 'string' ? document.querySelector(sidebar) : sidebar\n    if (typeof this.sidebar === 'undefined')\n      throw new Error('There is no specific sidebar element.')\n\n    this.sidebarInner = false\n    this.container = this.sidebar.parentElement\n\n    // Current Affix Type of sidebar element.\n    this.affixedType = 'STATIC'\n    this.direction = 'down'\n    this.support = {\n      transform: false,\n      transform3d: false\n    }\n\n    this._initialized = false\n    this._reStyle = false\n    this._breakpoint = false\n\n    // Dimensions of sidebar, container and screen viewport.\n    this.dimensions = {\n      translateY: 0,\n      maxTranslateY: 0,\n      topSpacing: 0,\n      lastTopSpacing: 0,\n      bottomSpacing: 0,\n      lastBottomSpacing: 0,\n      sidebarHeight: 0,\n      sidebarWidth: 0,\n      containerTop: 0,\n      containerHeight: 0,\n      viewportHeight: 0,\n      viewportTop: 0,\n      lastViewportTop: 0\n    }\n\n    // Bind event handlers for referencability.\n    ;['handleEvent'].forEach((method) => {\n      this[method] = this[method].bind(this)\n    })\n\n    // Initialize sticky sidebar for first time.\n    this.initialize()\n  }\n\n  /**\n   * Initializes the sticky sidebar by adding inner wrapper, define its container,\n   * min-width breakpoint, calculating dimensions, adding helper classes and inline style.\n   * @private\n   */\n  initialize() {\n    this._setSupportFeatures()\n\n    // Get sticky sidebar inner wrapper, if not found, will create one.\n    if (this.options.innerWrapperSelector) {\n      this.sidebarInner = this.sidebar.querySelector(\n        this.options.innerWrapperSelector\n      )\n\n      if (this.sidebarInner === null) this.sidebarInner = false\n    }\n\n    if (!this.sidebarInner) {\n      const wrapper = document.createElement('div')\n      wrapper.setAttribute('class', 'inner-wrapper-sticky')\n      this.sidebar.appendChild(wrapper)\n\n      while (this.sidebar.firstChild != wrapper)\n        wrapper.appendChild(this.sidebar.firstChild)\n\n      this.sidebarInner = this.sidebar.querySelector('.inner-wrapper-sticky')\n    }\n\n    // Container wrapper of the sidebar.\n    if (this.options.containerSelector) {\n      let containers = document.querySelectorAll(this.options.containerSelector)\n      containers = Array.prototype.slice.call(containers)\n\n      containers.forEach((container, item) => {\n        if (!container.contains(this.sidebar)) return\n        this.container = container\n      })\n\n      if (!containers.length)\n        throw new Error('The container does not contains on the sidebar.')\n    }\n\n    // If top/bottom spacing is not function parse value to integer.\n    if (typeof this.options.topSpacing !== 'function')\n      this.options.topSpacing = parseInt(this.options.topSpacing) || 0\n\n    if (typeof this.options.bottomSpacing !== 'function')\n      this.options.bottomSpacing = parseInt(this.options.bottomSpacing) || 0\n\n    // Breakdown sticky sidebar if screen width below `options.minWidth`.\n    this._widthBreakpoint()\n\n    // Calculate dimensions of sidebar, container and viewport.\n    this.calcDimensions()\n\n    // Affix sidebar in proper position.\n    this.stickyPosition()\n\n    // Bind all events.\n    this.bindEvents()\n\n    // Inform other properties the sticky sidebar is initialized.\n    this._initialized = true\n  }\n\n  /**\n   * Bind all events of sticky sidebar plugin.\n   * @protected\n   */\n  bindEvents() {\n    window.addEventListener('resize', this, { passive: true, capture: false })\n    window.addEventListener('scroll', this, { passive: true, capture: false })\n\n    this.sidebar.addEventListener('update' + EVENT_KEY, this)\n\n    // if( this.options.resizeSensor && 'undefined' !== typeof ResizeSensor ){\n    //   new ResizeSensor(this.sidebarInner, this.handleEvent);\n    //   new ResizeSensor(this.container, this.handleEvent);\n    // }\n  }\n\n  /**\n   * Handles all events of the plugin.\n   * @param {Object} event - Event object passed from listener.\n   */\n  handleEvent(event) {\n    this.updateSticky(event)\n  }\n\n  /**\n   * Calculates dimensions of sidebar, container and screen viewpoint\n   * @public\n   */\n  calcDimensions() {\n    if (this._breakpoint) return\n    var dims = this.dimensions\n\n    // Container of sticky sidebar dimensions.\n    dims.containerTop = StickySidebar.offsetRelative(this.container).top\n    dims.containerHeight = this.container.clientHeight\n    dims.containerBottom = dims.containerTop + dims.containerHeight\n\n    // Sidebar dimensions.\n    dims.sidebarHeight = this.sidebarInner.offsetHeight\n    dims.sidebarWidth = this.sidebarInner.offsetWidth\n\n    // Screen viewport dimensions.\n    dims.viewportHeight = window.innerHeight\n\n    // Maximum sidebar translate Y.\n    dims.maxTranslateY = dims.containerHeight - dims.sidebarHeight\n\n    this._calcDimensionsWithScroll()\n  }\n\n  /**\n   * Some dimensions values need to be up-to-date when scrolling the page.\n   * @private\n   */\n  _calcDimensionsWithScroll() {\n    var dims = this.dimensions\n\n    dims.sidebarLeft = StickySidebar.offsetRelative(this.sidebar).left\n\n    dims.viewportTop =\n      document.documentElement.scrollTop || document.body.scrollTop\n    dims.viewportBottom = dims.viewportTop + dims.viewportHeight\n    dims.viewportLeft =\n      document.documentElement.scrollLeft || document.body.scrollLeft\n\n    dims.topSpacing = this.options.topSpacing\n    dims.bottomSpacing = this.options.bottomSpacing\n\n    if (typeof dims.topSpacing === 'function')\n      dims.topSpacing = parseInt(dims.topSpacing(this.sidebar)) || 0\n\n    if (typeof dims.bottomSpacing === 'function')\n      dims.bottomSpacing = parseInt(dims.bottomSpacing(this.sidebar)) || 0\n\n    if (this.affixedType === 'VIEWPORT-TOP') {\n      // Adjust translate Y in the case decrease top spacing value.\n      if (dims.topSpacing < dims.lastTopSpacing) {\n        dims.translateY += dims.lastTopSpacing - dims.topSpacing\n        this._reStyle = true\n      }\n    } else if (this.affixedType === 'VIEWPORT-BOTTOM') {\n      // Adjust translate Y in the case decrease bottom spacing value.\n      if (dims.bottomSpacing < dims.lastBottomSpacing) {\n        dims.translateY += dims.lastBottomSpacing - dims.bottomSpacing\n        this._reStyle = true\n      }\n    }\n\n    dims.lastTopSpacing = dims.topSpacing\n    dims.lastBottomSpacing = dims.bottomSpacing\n  }\n\n  /**\n   * Determine whether the sidebar is bigger than viewport.\n   * @public\n   * @return {Boolean}\n   */\n  isSidebarFitsViewport() {\n    const dims = this.dimensions\n    const offset =\n      this.scrollDirection === 'down'\n        ? dims.lastBottomSpacing\n        : dims.lastTopSpacing\n    return (\n      this.dimensions.sidebarHeight + offset < this.dimensions.viewportHeight\n    )\n  }\n\n  /**\n   * Observe browser scrolling direction top and down.\n   */\n  observeScrollDir() {\n    var dims = this.dimensions\n    if (dims.lastViewportTop === dims.viewportTop) return\n\n    var furthest = this.direction === 'down' ? Math.min : Math.max\n\n    // If the browser is scrolling not in the same direction.\n    if (dims.viewportTop === furthest(dims.viewportTop, dims.lastViewportTop))\n      this.direction = this.direction === 'down' ? 'up' : 'down'\n  }\n\n  /**\n   * Gets affix type of sidebar according to current scroll top and scrolling direction.\n   * @public\n   * @return {String|False} - Proper affix type.\n   */\n  getAffixType() {\n    this._calcDimensionsWithScroll()\n    var dims = this.dimensions\n    var colliderTop = dims.viewportTop + dims.topSpacing\n    var affixType = this.affixedType\n\n    if (\n      colliderTop <= dims.containerTop ||\n      dims.containerHeight <= dims.sidebarHeight\n    ) {\n      dims.translateY = 0\n      affixType = 'STATIC'\n    } else {\n      affixType =\n        this.direction === 'up'\n          ? this._getAffixTypeScrollingUp()\n          : this._getAffixTypeScrollingDown()\n    }\n\n    // Make sure the translate Y is not bigger than container height.\n    dims.translateY = Math.max(0, dims.translateY)\n    dims.translateY = Math.min(dims.containerHeight, dims.translateY)\n    dims.translateY = Math.round(dims.translateY)\n\n    dims.lastViewportTop = dims.viewportTop\n    return affixType\n  }\n\n  /**\n   * Get affix type while scrolling down.\n   * @private\n   * @return {String} - Proper affix type of scrolling down direction.\n   */\n  _getAffixTypeScrollingDown() {\n    var dims = this.dimensions\n    var sidebarBottom = dims.sidebarHeight + dims.containerTop\n    var colliderTop = dims.viewportTop + dims.topSpacing\n    var colliderBottom = dims.viewportBottom - dims.bottomSpacing\n    var affixType = this.affixedType\n\n    if (this.isSidebarFitsViewport()) {\n      if (dims.sidebarHeight + colliderTop >= dims.containerBottom) {\n        dims.translateY = dims.containerBottom - sidebarBottom\n        affixType = 'CONTAINER-BOTTOM'\n      } else if (colliderTop >= dims.containerTop) {\n        dims.translateY = colliderTop - dims.containerTop\n        affixType = 'VIEWPORT-TOP'\n      }\n    } else {\n      if (dims.containerBottom <= colliderBottom) {\n        dims.translateY = dims.containerBottom - sidebarBottom\n        affixType = 'CONTAINER-BOTTOM'\n      } else if (sidebarBottom + dims.translateY <= colliderBottom) {\n        dims.translateY = colliderBottom - sidebarBottom\n        affixType = 'VIEWPORT-BOTTOM'\n      } else if (\n        dims.containerTop + dims.translateY <= colliderTop &&\n        dims.translateY !== 0 &&\n        dims.maxTranslateY !== dims.translateY\n      ) {\n        affixType = 'VIEWPORT-UNBOTTOM'\n      }\n    }\n\n    return affixType\n  }\n\n  /**\n   * Get affix type while scrolling up.\n   * @private\n   * @return {String} - Proper affix type of scrolling up direction.\n   */\n  _getAffixTypeScrollingUp() {\n    var dims = this.dimensions\n    var sidebarBottom = dims.sidebarHeight + dims.containerTop\n    var colliderTop = dims.viewportTop + dims.topSpacing\n    var colliderBottom = dims.viewportBottom - dims.bottomSpacing\n    var affixType = this.affixedType\n\n    if (colliderTop <= dims.translateY + dims.containerTop) {\n      dims.translateY = colliderTop - dims.containerTop\n      affixType = 'VIEWPORT-TOP'\n    } else if (dims.containerBottom <= colliderBottom) {\n      dims.translateY = dims.containerBottom - sidebarBottom\n      affixType = 'CONTAINER-BOTTOM'\n    } else if (!this.isSidebarFitsViewport()) {\n      if (\n        dims.containerTop <= colliderTop &&\n        dims.translateY !== 0 &&\n        dims.maxTranslateY !== dims.translateY\n      ) {\n        affixType = 'VIEWPORT-UNBOTTOM'\n      }\n    }\n\n    return affixType\n  }\n\n  /**\n   * Gets inline style of sticky sidebar wrapper and inner wrapper according\n   * to its affix type.\n   * @private\n   * @param {String} affixType - Affix type of sticky sidebar.\n   * @return {Object}\n   */\n  _getStyle(affixType) {\n    if (typeof affixType === 'undefined') return\n\n    var style = { inner: {}, outer: {} }\n    var dims = this.dimensions\n\n    switch (affixType) {\n      case 'VIEWPORT-TOP':\n        style.inner = {\n          position: 'fixed',\n          top: dims.topSpacing,\n          left: dims.sidebarLeft - dims.viewportLeft,\n          width: dims.sidebarWidth\n        }\n        break\n      case 'VIEWPORT-BOTTOM':\n        style.inner = {\n          position: 'fixed',\n          top: 'auto',\n          left: dims.sidebarLeft,\n          bottom: dims.bottomSpacing,\n          width: dims.sidebarWidth\n        }\n        break\n      case 'CONTAINER-BOTTOM':\n      case 'VIEWPORT-UNBOTTOM':\n        const translate = this._getTranslate(0, dims.translateY + 'px')\n\n        if (translate) style.inner = { transform: translate }\n        else\n          style.inner = {\n            position: 'absolute',\n            top: dims.translateY,\n            width: dims.sidebarWidth\n          }\n        break\n    }\n\n    switch (affixType) {\n      case 'VIEWPORT-TOP':\n      case 'VIEWPORT-BOTTOM':\n      case 'VIEWPORT-UNBOTTOM':\n      case 'CONTAINER-BOTTOM':\n        style.outer = { height: dims.sidebarHeight, position: 'relative' }\n        break\n    }\n\n    style.outer = StickySidebar.extend(\n      { height: '', position: '' },\n      style.outer\n    )\n    style.inner = StickySidebar.extend(\n      {\n        position: 'relative',\n        top: '',\n        left: '',\n        bottom: '',\n        width: '',\n        transform: ''\n      },\n      style.inner\n    )\n\n    return style\n  }\n\n  /**\n   * Cause the sidebar to be sticky according to affix type by adding inline\n   * style, adding helper class and trigger events.\n   * @function\n   * @protected\n   * @param {string} force - Update sticky sidebar position by force.\n   */\n  stickyPosition(force) {\n    if (this._breakpoint) return\n\n    force = this._reStyle || force || false\n\n    var offsetTop = this.options.topSpacing\n    var offsetBottom = this.options.bottomSpacing\n\n    var affixType = this.getAffixType()\n    var style = this._getStyle(affixType)\n\n    if ((this.affixedType != affixType || force) && affixType) {\n      const affixEvent =\n        'affix.' + affixType.toLowerCase().replace('viewport-', '') + EVENT_KEY\n      StickySidebar.eventTrigger(this.sidebar, affixEvent)\n\n      if (affixType === 'STATIC')\n        StickySidebar.removeClass(this.sidebar, this.options.stickyClass)\n      else StickySidebar.addClass(this.sidebar, this.options.stickyClass)\n\n      for (const key in style.outer) {\n        const unit = typeof style.outer[key] === 'number' ? 'px' : ''\n        this.sidebar.style[key] = style.outer[key] + unit\n      }\n\n      for (const key in style.inner) {\n        const unit = typeof style.inner[key] === 'number' ? 'px' : ''\n        this.sidebarInner.style[key] = style.inner[key] + unit\n      }\n\n      const affixedEvent =\n        'affixed.' +\n        affixType.toLowerCase().replace('viewport-', '') +\n        EVENT_KEY\n      StickySidebar.eventTrigger(this.sidebar, affixedEvent)\n    } else {\n      if (this._initialized) this.sidebarInner.style.left = style.inner.left\n    }\n\n    this.affixedType = affixType\n  }\n\n  /**\n   * Breakdown sticky sidebar when window width is below `options.minWidth` value.\n   * @protected\n   */\n  _widthBreakpoint() {\n    if (window.innerWidth <= this.options.minWidth) {\n      this._breakpoint = true\n      this.affixedType = 'STATIC'\n\n      this.sidebar.removeAttribute('style')\n      StickySidebar.removeClass(this.sidebar, this.options.stickyClass)\n      this.sidebarInner.removeAttribute('style')\n    } else {\n      this._breakpoint = false\n    }\n  }\n\n  /**\n   * Switches between functions stack for each event type, if there's no\n   * event, it will re-initialize sticky sidebar.\n   * @public\n   */\n  updateSticky(event = {}) {\n    if (this._running) return\n    this._running = true\n    ;((eventType) => {\n      requestAnimationFrame(() => {\n        switch (eventType) {\n          // When browser is scrolling and re-calculate just dimensions\n          // within scroll.\n          case 'scroll':\n            this._calcDimensionsWithScroll()\n            this.observeScrollDir()\n            this.stickyPosition()\n            break\n\n          // When browser is resizing or there's no event, observe width\n          // breakpoint and re-calculate dimensions.\n          case 'resize':\n          default:\n            this._widthBreakpoint()\n            this.calcDimensions()\n            this.stickyPosition(true)\n            break\n        }\n        this._running = false\n      })\n    })(event.type)\n  }\n\n  /**\n   * Set browser support features to the public property.\n   * @private\n   */\n  _setSupportFeatures() {\n    var support = this.support\n\n    support.transform = StickySidebar.supportTransform()\n    support.transform3d = StickySidebar.supportTransform(true)\n  }\n\n  /**\n   * Get translate value, if the browser supports transfrom3d, it will adopt it.\n   * and the same with translate. if browser doesn't support both return false.\n   * @param {Number} y - Value of Y-axis.\n   * @param {Number} x - Value of X-axis.\n   * @param {Number} z - Value of Z-axis.\n   * @return {String|False}\n   */\n  _getTranslate(y = 0, x = 0, z = 0) {\n    if (this.support.transform3d)\n      return 'translate3d(' + y + ', ' + x + ', ' + z + ')'\n    else if (this.support.translate) return 'translate(' + y + ', ' + x + ')'\n    else return false\n  }\n\n  /**\n   * Destroy sticky sidebar plugin.\n   * @public\n   */\n  destroy() {\n    window.removeEventListener('resize', this, { capture: false })\n    window.removeEventListener('scroll', this, { capture: false })\n\n    this.sidebar.classList.remove(this.options.stickyClass)\n    this.sidebar.style.minHeight = ''\n\n    this.sidebar.removeEventListener('update' + EVENT_KEY, this)\n\n    var styleReset = { inner: {}, outer: {} }\n\n    styleReset.inner = {\n      position: '',\n      top: '',\n      left: '',\n      bottom: '',\n      width: '',\n      transform: ''\n    }\n    styleReset.outer = { height: '', position: '' }\n\n    for (const key in styleReset.outer)\n      this.sidebar.style[key] = styleReset.outer[key]\n\n    for (const key in styleReset.inner)\n      this.sidebarInner.style[key] = styleReset.inner[key]\n\n    // if( this.options.resizeSensor && 'undefined' !== typeof ResizeSensor ){\n    //   ResizeSensor.detach(this.sidebarInner, this.handleEvent);\n    //   ResizeSensor.detach(this.container, this.handleEvent);\n    // }\n  }\n\n  /**\n   * Determine if the browser supports CSS transform feature.\n   * @function\n   * @static\n   * @param {Boolean} transform3d - Detect transform with translate3d.\n   * @return {String}\n   */\n  static supportTransform(transform3d) {\n    var result = false\n    var property = transform3d ? 'perspective' : 'transform'\n    var upper = property.charAt(0).toUpperCase() + property.slice(1)\n    var prefixes = ['Webkit', 'Moz', 'O', 'ms']\n    var support = document.createElement('support')\n    var style = support.style\n\n    ;(property + ' ' + prefixes.join(upper + ' ') + upper)\n      .split(' ')\n      .forEach(function (property, i) {\n        if (style[property] !== undefined) {\n          result = property\n          return false\n        }\n      })\n    return result\n  }\n\n  /**\n   * Trigger custom event.\n   * @static\n   * @param {DOMObject} element - Target element on the DOM.\n   * @param {String} eventName - Event name.\n   * @param {Object} data -\n   */\n  static eventTrigger(element, eventName, data) {\n    try {\n      var event = new CustomEvent(eventName, { detail: data })\n    } catch (e) {\n      var event = document.createEvent('CustomEvent')\n      event.initCustomEvent(eventName, true, true, data)\n    }\n    element.dispatchEvent(event)\n  }\n\n  /**\n   * Extend options object with defaults.\n   * @function\n   * @static\n   */\n  static extend(defaults, options) {\n    var results = {}\n    for (const key in defaults) {\n      if (typeof options[key] !== 'undefined') results[key] = options[key]\n      else results[key] = defaults[key]\n    }\n    return results\n  }\n\n  /**\n   * Get current coordinates left and top of specific element.\n   * @static\n   */\n  static offsetRelative(element) {\n    var result = { left: 0, top: 0 }\n\n    do {\n      const offsetTop = element.offsetTop\n      const offsetLeft = element.offsetLeft\n\n      if (!isNaN(offsetTop)) result.top += offsetTop\n\n      if (!isNaN(offsetLeft)) result.left += offsetLeft\n\n      element =\n        element.tagName === 'BODY'\n          ? element.parentElement\n          : element.offsetParent\n    } while (element)\n    return result\n  }\n\n  /**\n   * Add specific class name to specific element.\n   * @static\n   * @param {ObjectDOM} element\n   * @param {String} className\n   */\n  static addClass(element, className) {\n    if (!StickySidebar.hasClass(element, className)) {\n      if (element.classList) element.classList.add(className)\n      else element.className += ' ' + className\n    }\n  }\n\n  /**\n   * Remove specific class name to specific element\n   * @static\n   * @param {ObjectDOM} element\n   * @param {String} className\n   */\n  static removeClass(element, className) {\n    if (StickySidebar.hasClass(element, className)) {\n      if (element.classList) element.classList.remove(className)\n      else\n        element.className = element.className.replace(\n          new RegExp(\n            '(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)',\n            'gi'\n          ),\n          ' '\n        )\n    }\n  }\n\n  /**\n   * Determine weather the element has specific class name.\n   * @static\n   * @param {ObjectDOM} element\n   * @param {String} className\n   */\n  static hasClass(element, className) {\n    if (element.classList) return element.classList.contains(className)\n    else\n      return new RegExp('(^| )' + className + '( |$)', 'gi').test(\n        element.className\n      )\n  }\n\n  /**\n   * Gets default values of configuration options.\n   * @static\n   * @return {Object}\n   */\n  static get defaults() {\n    return DEFAULTS\n  }\n}\n\nexport default StickySidebar\n","import * as React from 'react'\nimport styles from './styles.module.css'\nimport StickySidebarImplementation from './sticky-sidebar'\n\nexport type Props = {\n  bottomSpacing?: number\n  content?: () => JSX.Element\n  id?: string\n  sidebarContent?: () => JSX.Element\n  sidebarId?: string\n  sidebarInnerId?: string\n  topSpacing?: number\n}\n\nconst StickySidebar = ({\n  bottomSpacing = 0,\n  content,\n  id = 'container',\n  sidebarContent,\n  sidebarId = 'sidebar',\n  sidebarInnerId = 'sidebar-inner',\n  topSpacing = 0\n}: Props) => {\n  const sidebarImplementation = React.useRef<StickySidebarImplementation>(\n    new StickySidebarImplementation(`#${sidebarId}`, {\n      containerSelector: `#${id}`,\n      innerWrapperSelector: `#${sidebarInnerId}`,\n      topSpacing: topSpacing,\n      bottomSpacing: bottomSpacing\n    })\n  )\n\n  React.useEffect(() => {\n    sidebarImplementation.current = new StickySidebarImplementation(\n      `#${sidebarId}`,\n      {\n        containerSelector: `#${id}`,\n        innerWrapperSelector: `#${sidebarInnerId}`,\n        topSpacing: topSpacing,\n        bottomSpacing: bottomSpacing\n      }\n    )\n  }, [id, sidebarId, sidebarInnerId])\n\n  return (\n    <div id={id} className={`sticky-sidebar ${styles.stickySidebar}`}>\n      <div\n        id={sidebarId}\n        className={`sticky-sidebar__sidebar ${styles.sidebar}`}\n      >\n        <div\n          id={sidebarInnerId}\n          className={`sticky-sidebar__sidebar-inner ${styles.sidebarInner}`}\n        >\n          {sidebarContent?.()}\n        </div>\n      </div>\n      <div className='sticky-sidebar__content'>{content?.()}</div>\n    </div>\n  )\n}\n\nexport default StickySidebar\n"],"names":["EVENT_KEY","DEFAULTS","topSpacing","bottomSpacing","containerSelector","innerWrapperSelector","stickyClass","resizeSensor","minWidth","StickySidebar","sidebar","options","extend","document","querySelector","Error","sidebarInner","container","parentElement","affixedType","direction","support","transform","transform3d","_initialized","_reStyle","_breakpoint","dimensions","translateY","maxTranslateY","lastTopSpacing","lastBottomSpacing","sidebarHeight","sidebarWidth","containerTop","containerHeight","viewportHeight","viewportTop","lastViewportTop","forEach","method","bind","initialize","_setSupportFeatures","wrapper","createElement","setAttribute","appendChild","firstChild","containers","querySelectorAll","Array","prototype","slice","call","item","contains","length","parseInt","_widthBreakpoint","calcDimensions","stickyPosition","bindEvents","window","addEventListener","passive","capture","handleEvent","event","updateSticky","dims","offsetRelative","top","clientHeight","containerBottom","offsetHeight","offsetWidth","innerHeight","_calcDimensionsWithScroll","sidebarLeft","left","documentElement","scrollTop","body","viewportBottom","viewportLeft","scrollLeft","isSidebarFitsViewport","offset","scrollDirection","observeScrollDir","furthest","Math","min","max","getAffixType","colliderTop","affixType","_getAffixTypeScrollingUp","_getAffixTypeScrollingDown","round","sidebarBottom","colliderBottom","_getStyle","style","inner","outer","position","width","bottom","translate","_getTranslate","height","force","affixEvent","toLowerCase","replace","eventTrigger","removeClass","addClass","key","unit","affixedEvent","innerWidth","removeAttribute","_running","eventType","requestAnimationFrame","type","supportTransform","y","x","z","destroy","removeEventListener","classList","remove","minHeight","styleReset","result","property","upper","charAt","toUpperCase","prefixes","join","split","i","undefined","element","eventName","data","CustomEvent","detail","e","createEvent","initCustomEvent","dispatchEvent","defaults","results","offsetTop","offsetLeft","isNaN","tagName","offsetParent","className","hasClass","add","RegExp","test","content","id","sidebarContent","sidebarId","sidebarInnerId","sidebarImplementation","React","StickySidebarImplementation","current","styles","stickySidebar"],"mappings":"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"}